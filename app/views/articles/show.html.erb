<% provide :page_title, 'Article has been created!!!' %> <!Podpis w ikonke "Kakaja stranica">

     <!3 Wywodim bazy po ID>
<section class="card-header">
      <h3><!%= t'.thanks'%></h3>
      <h4><%= @article.user.gravatar%>
      <%= @article.user.username%></h4>  <!Connect "usera!!">
      <h4><!%= t'.create'%></h4>
</section>
  <!h4><!%= @article.title %></h4>
              <!Podkluchenie time pod soobzheniem!>
  <time datetime="<%= @article.created_at.strftime("%Y-%m-%d %H:%M:%S")%>">
  <%= @article.created_at.strftime("%Y-%m-%d %H:%M:%S") %>
  </time>  
     
     <% if policy(@article).edit?%> <! Podkluchenie Авторизация (Pundit)>
   <%= link_to t('.edit_article'), edit_article_path(@article),class: "btn btn-secondary btn-sm bi bi-pencil-square"%> 
      <%end%>
      <% if policy(@article).destroy?%> <! Podkluchenie Авторизация (Pundit)>
   <%= link_to t('.delete_article'), article_path(@article), data: {'turbo-method': :delete,'turbo-confirm': 
     'Are you sure?'}, class:"btn btn-danger btn-sm bi bi-trash3-fill"%>
      <%end%>
  <hr>
 <h4><%= @article.title %></h4>
<%= image_tag @article.image, style: "width: 380px; height: auto", class: 'img-thumbnail thumb'%>
 <br>
 <p><%= @article.text %></p>
 
     <br> <!br>               <!Dobawlenie okna>
   <%= render 'tweets/commentable', commentable: @article, tweet: @tweet,  
     html_id: 'articleTweets' %>
   
<!/////////////////////////////////////////////////////////////////////////////////////////>
  <hr class="my-3">
<!h4><!%= t'.write'%></h4>

    <a class="button big  bi bi-pencil-square" href="#collapseExample" role="button" data-bs-toggle="collapse" aria-expanded="false">
                     <!Button Topic>
     <!a href="#" class="button2" tabindex="1" role="button" data-bs-toggle="dropdown" aria-expanded="false">
             <%= t('.Create Topic')%>
     </a>
                     <!Dropdown Topic>
  <ul class="collapse" id="collapseExample"  data: {'bs-toggle': 'collapse'}>
        <%= form_with model: [@article, @comment] do |f| %>

          <div class="mb-3 row">
             <div class="col-sm-2 col-form-label">
               <%= f.label :body %>
             </div>

          <div class="col-sm-10">                   <! Walidacija CSS ---required: true, minlength:2,>
               <%= f.text_area :body, class: 'form-control', required: true, minlength:2%>
             </div>
           </div>
          <div class="d-grid gap-2 col-6 mx-auto">
               <%= f.submit t('.submit_topic'), class: 'btn btn-primary' %>
          </div>
      <% end %>
  </ul>


<!/////////////////////////////////////////////////////////////////////////////////////>

<h4 class="mt-5"><%= t'.topic'%></h4>
<%= pagination @pagy %>


<br>
<% @comments.each do |comment| %>
  <article class="mb-3 card" >
      <div class="card-body">
     
                  
                   <h4> <%= comment.body %></h4>
                
        
  <section class="card-header">
  <h5><%= comment.user.gravatar%>
      <%= comment.user.username%></h5>  <!Connect "usera!!">
  
               <! Podkluchenie time pod soobzheniem!>
  <time datetime="<%= @article.created_at.strftime("%Y-%m-%d %H:%M:%S")%>">
  <%= @article.created_at.strftime("%Y-%m-%d %H:%M:%S") %>
  </time>  
  </section>
  <br>       
 
    <% if policy(comment).edit?%> <! Podkluchenie Авторизация (Pundit)>
 <%= link_to t('.edit_comment'), edit_article_comment_path(@article,comment),class: "btn btn-secondary btn-sm btn-sm bi bi-pencil-square"%> 
    <%end%>
    <% if policy(comment).destroy?%> <! Podkluchenie Авторизация (Pundit)>
 <%= link_to t('.delete_comment'), article_comment_path(@article,comment), class: 'btn btn-danger btn-sm  btn-sm bi bi-trash3-fill',
      data: {method: :delete, confirm: "Are you sure?"} %>
    <%end%>

    <br><br>      <!Dobawlenie okna>
 <%= render 'tweets/commentable', commentable: comment, tweet: @tweet,
  html_id: dom_id(comment, 'tweet_form') %>
    
    </div>
   </article>
<%end%>